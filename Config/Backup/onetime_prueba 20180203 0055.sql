--
-- Script was generated by Devart dbForge Studio for MySQL, Version 7.3.131.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 2/3/2018 12:55:17 AM
-- Server version: 5.5.5-10.1.30-MariaDB
-- Client version: 4.1
--


-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Create database "onetime"
--
CREATE DATABASE onetime
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

--
-- Set default database
--
USE onetime;

--
-- Drop view "vw_usuarios"
--
DROP VIEW IF EXISTS vw_usuarios CASCADE;

--
-- Drop view "vw_sucursales_empresa"
--
DROP VIEW IF EXISTS vw_sucursales_empresa CASCADE;

--
-- Drop view "vw_pvt_puestos_usuarios"
--
DROP VIEW IF EXISTS vw_pvt_puestos_usuarios CASCADE;

--
-- Drop view "vw_puestos_sucursales"
--
DROP VIEW IF EXISTS vw_puestos_sucursales CASCADE;

--
-- Drop view "vw_puestos_prioridades"
--
DROP VIEW IF EXISTS vw_puestos_prioridades CASCADE;

--
-- Drop view "vw_prioridades_turnos_puesto"
--
DROP VIEW IF EXISTS vw_prioridades_turnos_puesto CASCADE;

--
-- Drop view "vw_permisos_modulos_usuarios"
--
DROP VIEW IF EXISTS vw_permisos_modulos_usuarios CASCADE;

--
-- Drop view "vw_departamentos_sucursales"
--
DROP VIEW IF EXISTS vw_departamentos_sucursales CASCADE;

--
-- Drop view "vw_botones_departamentos"
--
DROP VIEW IF EXISTS vw_botones_departamentos CASCADE;

--
-- Drop view "vw_administracion_turnos_prioridad_puestos"
--
DROP VIEW IF EXISTS vw_administracion_turnos_prioridad_puestos CASCADE;

--
-- Drop view "vw_administracion_turnos"
--
DROP VIEW IF EXISTS vw_administracion_turnos CASCADE;

DELIMITER $$

--
-- Drop procedure "SP_GetTotalTurnosByEstadoToday"
--
DROP PROCEDURE IF EXISTS SP_GetTotalTurnosByEstadoToday$$

--
-- Drop procedure "SP_GetNextTurn"
--
DROP PROCEDURE IF EXISTS SP_GetNextTurn$$

--
-- Drop procedure "SP_GenerarLlamadaTurno_ORIGINAL"
--
DROP PROCEDURE IF EXISTS SP_GenerarLlamadaTurno_ORIGINAL$$

--
-- Drop procedure "SP_GenerarLlamadaTurno"
--
DROP PROCEDURE IF EXISTS SP_GenerarLlamadaTurno$$

--
-- Drop procedure "SP_ActualizarEstadoTurno"
--
DROP PROCEDURE IF EXISTS SP_ActualizarEstadoTurno$$

DELIMITER ;

--
-- Drop table "tmp_turnos_ordenados"
--
DROP TABLE IF EXISTS tmp_turnos_ordenados;

--
-- Drop table "tbl_videos"
--
DROP TABLE IF EXISTS tbl_videos;

--
-- Drop table "tbl_usuarios"
--
DROP TABLE IF EXISTS tbl_usuarios;

--
-- Drop table "tbl_tiempo_atencion_turnos"
--
DROP TABLE IF EXISTS tbl_tiempo_atencion_turnos;

--
-- Drop table "tbl_system_app"
--
DROP TABLE IF EXISTS tbl_system_app;

--
-- Drop table "tbl_sucursales"
--
DROP TABLE IF EXISTS tbl_sucursales;

--
-- Drop table "tbl_puestos"
--
DROP TABLE IF EXISTS tbl_puestos;

--
-- Drop table "tbl_prioridades_turnos"
--
DROP TABLE IF EXISTS tbl_prioridades_turnos;

--
-- Drop table "tbl_prioridad_turnos_puestos"
--
DROP TABLE IF EXISTS tbl_prioridad_turnos_puestos;

--
-- Drop table "tbl_perfiles_usuarios_permisos_modulos"
--
DROP TABLE IF EXISTS tbl_perfiles_usuarios_permisos_modulos;

--
-- Drop table "tbl_perfiles_usuarios"
--
DROP TABLE IF EXISTS tbl_perfiles_usuarios;

--
-- Drop table "tbl_modulos_aplicacion"
--
DROP TABLE IF EXISTS tbl_modulos_aplicacion;

--
-- Drop table "tbl_marquesina_pantalla"
--
DROP TABLE IF EXISTS tbl_marquesina_pantalla;

--
-- Drop table "tbl_log_usuarios"
--
DROP TABLE IF EXISTS tbl_log_usuarios;

--
-- Drop table "tbl_log_administracion_turnos"
--
DROP TABLE IF EXISTS tbl_log_administracion_turnos;

--
-- Drop table "tbl_estatus_turnos"
--
DROP TABLE IF EXISTS tbl_estatus_turnos;

--
-- Drop table "tbl_estados_turnos"
--
DROP TABLE IF EXISTS tbl_estados_turnos;

--
-- Drop table "tbl_empresa"
--
DROP TABLE IF EXISTS tbl_empresa;

--
-- Drop table "tbl_departamentos"
--
DROP TABLE IF EXISTS tbl_departamentos;

--
-- Drop table "tbl_botones_turnos"
--
DROP TABLE IF EXISTS tbl_botones_turnos;

--
-- Drop table "tbl_administracion_turnos"
--
DROP TABLE IF EXISTS tbl_administracion_turnos;

--
-- Drop table "pv_usuarios_puestos"
--
DROP TABLE IF EXISTS pv_usuarios_puestos;

--
-- Drop table "pv_botones_turnos_departamentos"
--
DROP TABLE IF EXISTS pv_botones_turnos_departamentos;

--
-- Set default database
--
USE onetime;

--
-- Create table "pv_botones_turnos_departamentos"
--
CREATE TABLE pv_botones_turnos_departamentos (
  Id int(11) NOT NULL,
  BotonTurnoID int(11) NOT NULL,
  DepartamentoID int(11) NOT NULL,
  CreadoPorUsuarioID int(11) NOT NULL,
  FechaCreacion datetime NOT NULL,
  FechaModificacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 2730
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

--
-- Create table "pv_usuarios_puestos"
--
CREATE TABLE pv_usuarios_puestos (
  Id int(11) NOT NULL,
  UsuarioID int(11) DEFAULT NULL,
  PuestoID int(11) DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 1638
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

--
-- Create table "tbl_administracion_turnos"
--
CREATE TABLE tbl_administracion_turnos (
  Id int(11) NOT NULL AUTO_INCREMENT,
  BotonTurnoID int(11) DEFAULT NULL,
  Turno varchar(45) DEFAULT NULL,
  EstadoTurnoID int(11) DEFAULT NULL,
  EstatusTurnoID int(11) DEFAULT NULL,
  FechaHoraLlamada datetime DEFAULT NULL,
  CantReLlamadas int(11) DEFAULT NULL,
  FechaHoraReLlamada datetime DEFAULT NULL,
  FechaHoraAnulacion datetime DEFAULT NULL,
  FechaHoraSeleccion datetime DEFAULT NULL,
  FechaHoraEnPuesto datetime DEFAULT NULL,
  TransferidoAPuestoID int(11) DEFAULT NULL,
  FechaHoraTransferido datetime DEFAULT NULL,
  FechaHoraFinalizar datetime DEFAULT NULL,
  PuestoID int(11) DEFAULT NULL,
  DepartamentoID int(11) DEFAULT NULL,
  SucursalID int(11) DEFAULT NULL,
  Comentario text DEFAULT NULL,
  IDExterno varchar(45) DEFAULT NULL,
  CampoExterno varchar(45) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion date DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id)
)
ENGINE = INNODB
AUTO_INCREMENT = 16
AVG_ROW_LENGTH = 1092
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

--
-- Create table "tbl_botones_turnos"
--
CREATE TABLE tbl_botones_turnos (
  Id int(11) NOT NULL,
  Nombre varchar(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  Icono varchar(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  Color varchar(45) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  TextoGraMostrar varchar(45) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  TextoPeqMostrar varchar(45) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  ValorBoton varchar(45) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  TipoBoton varchar(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  Logo text DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime NOT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(1) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Nombre_UNIQUE (Nombre),
  UNIQUE Index ValorBoton_UNIQUE (ValorBoton)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 2730
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_departamentos"
--
CREATE TABLE tbl_departamentos (
  Id int(11) NOT NULL,
  SucursalID int(11) NOT NULL,
  Codigo varchar(50) DEFAULT NULL,
  Nombre varchar(100) NOT NULL,
  Descripcion text DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Codigo_UNIQUE (Codigo),
  UNIQUE Index depto_id (Id),
  UNIQUE Index Nombre_UNIQUE (Nombre),
  Index sucursal_id (SucursalID)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 8192
CHARACTER SET utf8mb4
COLLATE utf8mb4_general_ci;

--
-- Create table "tbl_empresa"
--
CREATE TABLE tbl_empresa (
  Id int(11) NOT NULL,
  Codigo varchar(50) DEFAULT NULL,
  Nombre varchar(100) NOT NULL,
  Descripcion text DEFAULT NULL,
  LogoGrande text DEFAULT NULL,
  LogoPeq text DEFAULT NULL,
  Telefono varchar(20) DEFAULT NULL,
  Direccion text DEFAULT NULL,
  Rnc varchar(30) DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Codigo_UNIQUE (Codigo),
  UNIQUE Index Nombre_UNIQUE (Nombre)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 16384
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_estados_turnos"
--
CREATE TABLE tbl_estados_turnos (
  Id int(11) NOT NULL,
  Estado varchar(10) DEFAULT NULL,
  Descripcion varchar(50) DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Estado_UNIQUE (Estado)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 2730
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_estatus_turnos"
--
CREATE TABLE tbl_estatus_turnos (
  Id int(11) NOT NULL,
  Estatus varchar(45) DEFAULT NULL,
  Descripcion text DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Estatus_UNIQUE (Estatus)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 16384
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_log_administracion_turnos"
--
CREATE TABLE tbl_log_administracion_turnos (
  LogID int(11) NOT NULL,
  Accion varchar(150) DEFAULT NULL,
  Descripcion text DEFAULT NULL,
  IDAfectado int(11) DEFAULT NULL,
  UsuarioID int(11) DEFAULT NULL,
  FechaHora datetime DEFAULT NULL,
  PRIMARY KEY (LogID)
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_log_usuarios"
--
CREATE TABLE tbl_log_usuarios (
  LogID int(11) NOT NULL,
  UsuarioID int(11) NOT NULL,
  Online tinyint(4) NOT NULL,
  FechaLogin datetime NOT NULL,
  FechaLogout datetime NOT NULL,
  Ausente tinyint(4) NOT NULL,
  FechaAusenteSalida datetime NOT NULL,
  FechaAusenteRegreso datetime NOT NULL,
  PRIMARY KEY (LogID)
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_marquesina_pantalla"
--
CREATE TABLE tbl_marquesina_pantalla (
  Id int(11) NOT NULL,
  DepartamentoID int(11) NOT NULL,
  TextoMostrar text NOT NULL,
  HoraInicial time NOT NULL,
  FechaInicial date NOT NULL,
  HoraFinal time NOT NULL,
  FechaFinal date NOT NULL,
  CreadoPorUsuarioID int(11) NOT NULL,
  FechaCreacion datetime NOT NULL,
  ModificadoPorUsuarioID int(11) NOT NULL,
  FechaModificacion datetime NOT NULL,
  Activo tinyint(4) NOT NULL DEFAULT 1,
  PRIMARY KEY (Id),
  Index sucursal_id (DepartamentoID)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 5461
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_modulos_aplicacion"
--
CREATE TABLE tbl_modulos_aplicacion (
  Id int(11) NOT NULL,
  Codigo varchar(45) DEFAULT NULL,
  Nombre varchar(45) DEFAULT NULL,
  Descripcion text DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Codigo_UNIQUE (Codigo),
  UNIQUE Index Nombre_UNIQUE (Nombre)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 8192
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_perfiles_usuarios"
--
CREATE TABLE tbl_perfiles_usuarios (
  Id int(11) NOT NULL,
  Perfil varchar(200) DEFAULT NULL,
  Descripcion text DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Perfil_UNIQUE (Perfil)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 2730
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_perfiles_usuarios_permisos_modulos"
--
CREATE TABLE tbl_perfiles_usuarios_permisos_modulos (
  Id int(11) NOT NULL,
  PerfilUsuarioID int(11) NOT NULL,
  ModuloID int(11) NOT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 8192
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_prioridad_turnos_puestos"
--
CREATE TABLE tbl_prioridad_turnos_puestos (
  Id int(11) NOT NULL,
  PrioridadID int(11) NOT NULL,
  BotonTurnoID int(11) NOT NULL,
  PuestoID int(11) NOT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id, PrioridadID, BotonTurnoID, PuestoID)
)
ENGINE = MYISAM
AVG_ROW_LENGTH = 36
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

--
-- Create table "tbl_prioridades_turnos"
--
CREATE TABLE tbl_prioridades_turnos (
  Id int(11) NOT NULL,
  Nivel int(11) NOT NULL,
  Prioridad varchar(50) DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index idPrioridad (Id),
  UNIQUE Index Nivel_UNIQUE (Nivel),
  Index puesto (Nivel)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 3276
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

--
-- Create table "tbl_puestos"
--
CREATE TABLE tbl_puestos (
  Id int(11) NOT NULL,
  DepartamentoID int(11) NOT NULL,
  Codigo varchar(50) DEFAULT NULL,
  Nombre varchar(100) NOT NULL,
  Descripcion text DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Codigo_UNIQUE (Codigo),
  UNIQUE Index Nombre_UNIQUE (Nombre)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 2048
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_sucursales"
--
CREATE TABLE tbl_sucursales (
  Id int(11) NOT NULL,
  EmpresaID int(11) NOT NULL,
  Codigo varchar(50) DEFAULT NULL,
  Nombre varchar(100) NOT NULL,
  Descripcion text DEFAULT NULL,
  Direccion text DEFAULT NULL,
  Telefono varchar(25) DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Codigo_UNIQUE (Codigo),
  Index empresa_id (EmpresaID),
  UNIQUE Index Nombre_UNIQUE (Nombre)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 16384
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_system_app"
--
CREATE TABLE tbl_system_app (
  Id int(11) NOT NULL,
  LlamadaPorVoz tinyint(4) DEFAULT NULL,
  CanalYotube text DEFAULT NULL,
  ModoDebug varchar(45) DEFAULT NULL,
  `DataBase` varchar(45) DEFAULT NULL,
  PRIMARY KEY (Id)
)
ENGINE = INNODB
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

--
-- Create table "tbl_tiempo_atencion_turnos"
--
CREATE TABLE tbl_tiempo_atencion_turnos (
  Id int(11) NOT NULL,
  BotonTurnoID int(11) DEFAULT NULL,
  Descripcion text DEFAULT NULL,
  TiempoMin time DEFAULT NULL,
  TiempoMax time DEFAULT NULL,
  CreadoPorUsuarioID int(11) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id)
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_usuarios"
--
CREATE TABLE tbl_usuarios (
  Id int(11) NOT NULL,
  PerfilUsuarioID int(11) NOT NULL,
  PuestoID int(11) NOT NULL,
  Nombre varchar(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  Apellido varchar(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  Usuario varchar(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  Password text CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  Email varchar(100) DEFAULT NULL,
  Imagen text CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
  CreadoPorUsuarioID varchar(50) DEFAULT NULL,
  FechaCreacion datetime DEFAULT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime DEFAULT NULL,
  Activo tinyint(4) DEFAULT 1,
  PRIMARY KEY (Id),
  UNIQUE Index Email_UNIQUE (Email),
  UNIQUE Index Usuario_UNIQUE (Usuario)
)
ENGINE = INNODB
AVG_ROW_LENGTH = 2340
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tbl_videos"
--
CREATE TABLE tbl_videos (
  Id int(11) NOT NULL,
  Nombre varchar(50) DEFAULT NULL,
  VideoLink text NOT NULL,
  CreadoPorUsuarioID int(11) NOT NULL,
  FechaCreacion datetime NOT NULL,
  ModificadoPorUsuarioID int(11) DEFAULT NULL,
  FechaModificacion datetime NOT NULL,
  Activo tinyint(4) NOT NULL DEFAULT 1,
  PRIMARY KEY (Id)
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Create table "tmp_turnos_ordenados"
--
CREATE TABLE tmp_turnos_ordenados (
  TurnoID int(11) DEFAULT NULL,
  FechaHoraSeleccion datetime DEFAULT NULL
)
ENGINE = INNODB
CHARACTER SET latin1
COLLATE latin1_swedish_ci;

DELIMITER $$

--
-- Create procedure "SP_ActualizarEstadoTurno"
--
CREATE PROCEDURE SP_ActualizarEstadoTurno (IN `PuestoID` int, IN `TurnoID` int, IN `CreadoPorUsuarioID` int, IN `Estado` varchar(10), IN `SucursalID` int, IN `Comentario` varchar(200), OUT `CantReLlamadas` varchar(20))
BEGIN

  DECLARE EstadoID int;
  DECLARE EstatusID int;
  IF TurnoID = '' THEN
    SET TurnoID = 0;
  END IF;


  SET EstadoID = (SELECT
      Id
    FROM tbl_estados_turnos AS e
    WHERE e.Estado = Estado
    AND e.Activo = 1);


  IF Estado = 'E' THEN

    UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.EstadoTurnoID = EstadoID,
        adm.CreadoPorUsuarioID = CreadoPorUsuarioID
    WHERE adm.Id = TurnoID;

  ELSEIF Estado = 'L' THEN

    UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.EstadoTurnoID = EstadoID,
        adm.CantReLlamadas = (adm.CantReLlamadas + 1),
        adm.CreadoPorUsuarioID = CreadoPorUsuarioID,
        adm.FechaHoraLlamada = NOW()
    WHERE adm.Id = TurnoID;
    SET CantReLlamadas = (SELECT
        adm.CantReLlamadas
      FROM onetime.tbl_administracion_turnos AS adm
      WHERE adm.Id = TurnoID);

  ELSEIF Estado = 'A' THEN
    SET EstatusID = (SELECT
        Id
      FROM tbl_estatus_turnos AS e
      WHERE e.Estatus = 'F'
      AND e.Activo = 1);
    UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.EstadoTurnoID = EstadoID,
        adm.EstatusTurnoID = EstatusID,
        adm.CreadoPorUsuarioID = CreadoPorUsuarioID,
        adm.FechaHoraAnulacion = NOW(),
        adm.Comentario = Comentario
    WHERE adm.Id = TurnoID;

  ELSEIF Estado = 'P' THEN

    UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.EstadoTurnoID = EstadoID,
        adm.CreadoPorUsuarioID = CreadoPorUsuarioID,
        adm.FechaHoraEnPuesto = NOW()
    WHERE adm.Id = TurnoID;

  ELSEIF Estado = 'F' THEN

    SET EstadoID = IF((SELECT
        adm.EstatusTurnoID
      FROM onetime.tbl_administracion_turnos AS adm
      WHERE adm.Id = TurnoID) IS NULL, (SELECT
        Id
      FROM tbl_estados_turnos AS e
      WHERE e.Estado = 'E'
      AND e.Activo = 1), (SELECT
        Id
      FROM tbl_estados_turnos AS e
      WHERE e.Estado = 'F'
      AND e.Activo = 1));
    SET EstatusID = (SELECT
        Id
      FROM tbl_estatus_turnos AS e
      WHERE e.Estatus = 'F'
      AND e.Activo = 1);

    UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.EstadoTurnoID = EstadoID,
        adm.EstatusTurnoID = EstatusID,
        adm.ModificadoPorUsuarioID = CreadoPorUsuarioID,
        adm.FechaHoraFinalizar = NOW()
    WHERE adm.Id = TurnoID;

  ELSE
    UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.EstadoTurnoID = EstadoID,
        adm.CreadoPorUsuarioID = CreadoPorUsuarioID,
        adm.FechaHoraTransferido = NOW()
    WHERE adm.Id = TurnoID;

  END IF;


END
$$

--
-- Create procedure "SP_GenerarLlamadaTurno"
--
CREATE PROCEDURE SP_GenerarLlamadaTurno (IN `InPuestoID` int, IN `InCreadoPorUsuarioID` int, IN `InSucursalID` int, IN `InDepartamentoID` int, OUT `Turno` varchar(50), OUT `TurnoID` int)
BEGIN

  DECLARE Puesto varchar(100);
  DECLARE ExistenTurnos int;
  DECLARE CreadoPorUsuarioID int;
  DECLARE TurnoIDSeleccionado varchar(45);
  DECLARE TurnoSeleccionado varchar(45);


  SET Puesto = (SELECT
      p.Nombre
    FROM onetime.tbl_puestos AS p
    WHERE p.Id = InPuestoID);

  -- SI EL PUESTO ES TOMA DE MUESTRA SE EJECUTARA LA SIGUIENTE SENTENCIA
  IF Puesto = 'TOMA DE MUESTRA' THEN

    INSERT INTO tmp_turnos_ordenados (TurnoID, FechaHoraSeleccion)
      SELECT DISTINCT
        a.Id,
        a.FechaHoraSeleccion
      FROM onetime.vw_administracion_turnos a
      WHERE a.BotonTurnoValor = 'T'
      AND a.Estado IN ('E')
      AND a.Estatus IS NULL
      AND date (a.FechaCreacion) = date (NOW())
      AND a.DepartamentoID = InDepartamentoID
      AND a.SucursalID = InSucursalID
      AND a.Activo = 1
      ORDER BY a.FechaHoraSeleccion;


    INSERT INTO tmp_turnos_ordenados (TurnoID, FechaHoraSeleccion)
      SELECT DISTINCT
        a.Id,
        a.FechaHoraSeleccion
      FROM onetime.vw_administracion_turnos a
      WHERE a.Estatus IN ('F')
      AND a.Estado IN ('E')
      AND a.BotonTurnoValor NOT IN ('T')
      AND date (a.FechaCreacion) = date (NOW())
      AND a.DepartamentoID = InDepartamentoID
      AND a.SucursalID = InSucursalID
      AND a.Activo = 1
      ORDER BY a.FechaHoraSeleccion;



    SET TurnoIDSeleccionado := (SELECT
        b.TurnoID
      FROM tmp_turnos_ordenados b
      ORDER BY b.FechaHoraSeleccion LIMIT 1);

  ELSE

    -- SI NO ES EL PUESTO TOMA DE MUESTRA, TRAEME EL SIGUIENTE TURNO DE ACUERDO A TU PUESTO

    SET TurnoIDSeleccionado = (SELECT
        adm.Id
      FROM onetime.vw_administracion_turnos_prioridad_puestos AS adm
      WHERE adm.PuestoIDPrioridad = InPuestoID
      AND adm.Estado = 'E'
      AND adm.Estatus IS NULL
      AND date (adm.FechaCreacion) = date (NOW())
      AND adm.DepartamentoID = InDepartamentoID
      AND adm.SucursalID = InSucursalID
      AND adm.Activo = 1
      ORDER BY adm.Nivel, adm.Turno ASC LIMIT 1);

  END IF;

  IF TurnoIDSeleccionado IS NOT NULL THEN

    UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.PuestoID = InPuestoID,
        adm.EstadoTurnoID = (SELECT
            Id
          FROM tbl_estados_turnos
          WHERE Estado = 'L' LIMIT 1),
        adm.CantReLlamadas = 1, -- (SELECT ((adm2.CantReLlamadas) + 1)  FROM onetime.vw_administracion_turnos_prioridad_puestos adm2  WHERE adm2.Id = TurnoID LIMIT 1),
        adm.FechaHoraLlamada = NOW(),
        adm.CreadoPorUsuarioID = InCreadoPorUsuarioID
    WHERE adm.Id = TurnoIDSeleccionado;

    SET TurnoID = TurnoIDSeleccionado;
    SET Turno = (SELECT
        adm.TurnoConcatenado
      FROM onetime.vw_administracion_turnos adm
      WHERE adm.Id = TurnoIDSeleccionado LIMIT 1);

    TRUNCATE TABLE tmp_turnos_ordenados;

  ELSE

    SET Turno = 0;
    SET TurnoID = 0;

    TRUNCATE TABLE tmp_turnos_ordenados;


  END IF;



END
$$

--
-- Create procedure "SP_GenerarLlamadaTurno_ORIGINAL"
--
CREATE PROCEDURE SP_GenerarLlamadaTurno_ORIGINAL (IN `InPuestoID` int, IN `InCreadoPorUsuarioID` int, IN `InSucursalID` int, IN `InDepartamentoID` int, OUT `Turno` varchar(50), OUT `TurnoID` int)
BEGIN

  DECLARE Puesto varchar(100);
  DECLARE ExistenTurnos int;
  DECLARE CantidadLlamadas int;
  DECLARE TurnoSalida varchar(25);

  TRUNCATE TABLE tmp_turnos_ordenados;

  SET Puesto = (SELECT
      p.Nombre
    FROM onetime.tbl_puestos AS p
    WHERE p.Id = InPuestoID);

  -- SI EL PUESTO ES TOMA DE MUESTRA SE EJECUTARA LA SIGUIENTE SENTENCIA
  IF Puesto = 'TOMA DE MUESTRA' THEN

    INSERT INTO tmp_turnos_ordenados (TurnoID, TurnoConcatenado, FechaHoraSeleccion)
      SELECT DISTINCT
        a.Id,
        a.TurnoConcatenado,
        a.FechaHoraSeleccion
      FROM onetime.vw_administracion_turnos a
      WHERE a.BotonTurnoValor = 'T'
      AND a.Estado IN ('E')
      AND a.Estatus IS NULL
      AND date (a.FechaCreacion) = date (NOW())
      AND a.DepartamentoID = InDepartamentoID
      AND a.SucursalID = InSucursalID
      AND a.Activo = 1
      ORDER BY a.FechaHoraSeleccion;


    INSERT INTO tmp_turnos_ordenados (TurnoID, TurnoConcatenado, FechaHoraSeleccion)
      SELECT DISTINCT
        a.Id,
        a.TurnoConcatenado,
        a.FechaHoraSeleccion
      FROM onetime.vw_administracion_turnos a
      WHERE a.Estatus IN ('F')
      AND a.Estado IN ('E')
      AND a.BotonTurnoValor NOT IN ('T')
      AND date (a.FechaCreacion) = date (NOW())
      AND a.DepartamentoID = InDepartamentoID
      AND a.SucursalID = InSucursalID
      AND a.Activo = 1
      ORDER BY a.FechaHoraSeleccion;

    SET TurnoID = (SELECT
        *
      FROM tmp_turnos_ordenados
      ORDER BY FechaHoraSeleccion LIMIT 1);
  --  SELECT TurnoSalida;

  /*  = ();
 INSERT INTO tmp_turnos_ordenados (TurnoID, TurnoConcatenado) values (100, TurnoSalida);
*/

  ELSE

    -- SI NO ES EL PUESTO TOMA DE MUESTRA, TRAEME EL SIGUIENTE TURNO DE ACUERDO A TU PUESTO

    SET TurnoSalida = (SELECT
        adm.Id
      FROM onetime.vw_administracion_turnos_prioridad_puestos AS adm
      WHERE adm.PuestoIDPrioridad = InPuestoID
      AND adm.Estado = 'E'
      AND adm.Estatus IS NULL
      AND date (adm.FechaCreacion) = date (NOW())
      AND adm.DepartamentoID = InDepartamentoID
      AND adm.SucursalID = InSucursalID
      AND adm.Activo = 1
      ORDER BY adm.Nivel, adm.Turno ASC LIMIT 1);



  END IF;



  IF TurnoSalida IS NOT NULL THEN

    SET CantidadLlamadas = (SELECT
        (IFNULL(cant.CantReLlamadas, 0) + 1) CantReLlamadas
      FROM onetime.vw_administracion_turnos cant
      WHERE cant.Id = TurnoSalida LIMIT 1);


  /*  UPDATE onetime.tbl_administracion_turnos AS adm
    SET adm.PuestoID = InPuestoID,
    adm.EstadoTurnoID =  (SELECT Id FROM tbl_estados_turnos  WHERE Estado = 'L' LIMIT 1),
    adm.CantReLlamadas  =  CantidadLlamadas,
    adm.FechaHoraLlamada = NOW(),
    adm.CreadoPorUsuarioID = InCreadoPorUsuarioID
    WHERE adm.Id = TurnoID;

	SET Turno = (SELECT adm.TurnoConcatenado FROM onetime.vw_administracion_turnos adm WHERE adm.Id = TurnoID LIMIT 1);
*/
  ELSE
    SET Turno = 0;
    SET TurnoID = 0;
  --  INSERT INTO tmp_turnos_ordenados (TurnoID, TurnoConcatenado) values (0, 'NO');


  END IF;


END
$$

--
-- Create procedure "SP_GetNextTurn"
--
CREATE PROCEDURE SP_GetNextTurn (IN `BotonTurnoID` int, IN `CreadoPorUsuarioID` int, IN `DepartamentoID` int, IN `SucursalID` int, OUT `Contador` int)
BEGIN

  /*
  ****** GENERA UN TICKET DE TURNO *********
  OBTIENE EL UTIMO ULTIMO EN X DEPARTAMENTO
  
  */

  DECLARE EstadoTurnoID int;
  DECLARE Turno int;

  SET EstadoTurnoID = (SELECT
      Id
    FROM onetime.tbl_estados_turnos
    WHERE Estado = 'E');
  SET Turno = (SELECT
      COUNT(BotonTurnoID) + 1 AS Contador
    FROM tbl_administracion_turnos AS Adm
    WHERE date (Adm.FechaCreacion) = date (NOW())
    AND Adm.Activo = 1
    AND Adm.BotonTurnoID = BotonTurnoID
    AND Adm.DepartamentoID = DepartamentoID
    AND Adm.SucursalID = SucursalID);
  SET Contador = Turno;

  INSERT INTO `onetime`.`tbl_administracion_turnos` (`BotonTurnoID`,
  `Turno`,
  DepartamentoID,
  SucursalID,
  `EstadoTurnoID`,
  `FechaHoraSeleccion`,
  `CreadoPorUsuarioID`,
  `FechaCreacion`)
    VALUES (BotonTurnoID, Turno, DepartamentoID, SucursalID, EstadoTurnoID, NOW(), CreadoPorUsuarioID, NOW());


END
$$

--
-- Create procedure "SP_GetTotalTurnosByEstadoToday"
--
CREATE PROCEDURE SP_GetTotalTurnosByEstadoToday (IN Estado varchar(20), IN DepartamentID int, OUT Total int)
BEGIN
  IF Estado = 'null' THEN
    SET Total = (SELECT
        COUNT(*) CANTIDAD_TURNOS_HOY
      FROM onetime.vw_administracion_turnos AS a
      WHERE a.Activo = 1
      AND DATE_FORMAT(a.FechaCreacion, "%Y-%m-%d") = CURDATE()
      AND a.DepartamentoID = DepartamentID);
  ELSE
    SET Total = (SELECT
        COUNT(*) CANTIDAD_TURNOS_HOY
      FROM onetime.vw_administracion_turnos AS a
      WHERE a.Activo = 1
      AND DATE_FORMAT(a.FechaCreacion, "%Y-%m-%d") = CURDATE()
      AND a.Estado IN (Estado)
      AND a.DepartamentoID = DepartamentID);
  END IF;
END
$$

DELIMITER ;

--
-- Create view "vw_administracion_turnos"
--
CREATE OR REPLACE
VIEW vw_administracion_turnos
AS
SELECT
  `adm`.`Id` AS `Id`,
  `adm`.`BotonTurnoID` AS `BotonTurnoID`,
  `btn`.`Nombre` AS `BotonTurno`,
  `btn`.`ValorBoton` AS `BotonTurnoValor`,
  `adm`.`Turno` AS `Turno`,
  CONCAT(`btn`.`ValorBoton`, '-', `adm`.`Turno`) AS `TurnoConcatenado`,
  `adm`.`EstadoTurnoID` AS `EstadoTurnoID`,
  `estados`.`Estado` AS `Estado`,
  `adm`.`EstatusTurnoID` AS `EstatusTurnoID`,
  `estatus`.`Estatus` AS `Estatus`,
  `adm`.`PuestoID` AS `PuestoID`,
  `p`.`Nombre` AS `Puesto`,
  `adm`.`FechaHoraSeleccion` AS `FechaHoraSeleccion`,
  `adm`.`FechaHoraLlamada` AS `FechaHoraLlamada`,
  `adm`.`FechaHoraEnPuesto` AS `FechaHoraEnPuesto`,
  `adm`.`FechaHoraFinalizar` AS `FechaHoraFinalizar`,
  `adm`.`FechaHoraAnulacion` AS `FechaHoraAnulacion`,
  `adm`.`FechaHoraTransferido` AS `FechaHoraTransferido`,
  `adm`.`TransferidoAPuestoID` AS `TransferidoAPuestoID`,
  `adm`.`FechaHoraReLlamada` AS `FechaHoraRellamada`,
  `adm`.`CantReLlamadas` AS `CantReLlamadas`,
  `adm`.`Comentario` AS `Comentario`,
  `adm`.`DepartamentoID` AS `DepartamentoID`,
  `dept`.`Nombre` AS `Departamento`,
  `adm`.`SucursalID` AS `SucursalID`,
  `suc`.`Nombre` AS `Sucursal`,
  `emp`.`Id` AS `EmpresaID`,
  `emp`.`Nombre` AS `Empresa`,
  `adm`.`CreadoPorUsuarioID` AS `CreadoPorUsuarioID`,
  CONCAT(`u`.`Nombre`, ' ', `u`.`Apellido`) AS `NombreUsuario`,
  `u`.`Usuario` AS `Usuario`,
  `adm`.`FechaCreacion` AS `FechaCreacion`,
  `adm`.`ModificadoPorUsuarioID` AS `ModificadoPorUsuarioID`,
  `adm`.`FechaModificacion` AS `FechaModificacion`,
  `adm`.`Activo` AS `Activo`,
  `adm`.`IDExterno` AS `IDExterno`,
  `adm`.`CampoExterno` AS `CampoExterno`,
  DAYOFMONTH(`adm`.`FechaCreacion`) AS `Dia`,
  MONTH(`adm`.`FechaCreacion`) AS `Mes`,
  YEAR(`adm`.`FechaCreacion`) AS `Ano`
FROM ((((((((`tbl_administracion_turnos` `adm`
  JOIN `tbl_botones_turnos` `btn`
    ON ((`adm`.`BotonTurnoID` = `btn`.`Id`)))
  LEFT JOIN `tbl_puestos` `p`
    ON ((`adm`.`PuestoID` = `p`.`Id`)))
  JOIN `tbl_departamentos` `dept`
    ON ((`adm`.`DepartamentoID` = `dept`.`Id`)))
  JOIN `tbl_sucursales` `suc`
    ON ((`adm`.`DepartamentoID` = `suc`.`Id`)))
  JOIN `tbl_empresa` `emp`
    ON ((`suc`.`EmpresaID` = `emp`.`Id`)))
  JOIN `tbl_estados_turnos` `estados`
    ON ((`adm`.`EstadoTurnoID` = `estados`.`Id`)))
  JOIN `tbl_usuarios` `u`
    ON ((`adm`.`CreadoPorUsuarioID` = `u`.`Id`)))
  LEFT JOIN `tbl_estatus_turnos` `estatus`
    ON ((`adm`.`EstatusTurnoID` = `estatus`.`Id`)));

--
-- Create view "vw_administracion_turnos_prioridad_puestos"
--
CREATE OR REPLACE
VIEW vw_administracion_turnos_prioridad_puestos
AS
SELECT DISTINCT
  `adm`.`Id` AS `Id`,
  `p`.`PrioridadID` AS `PrioridadID`,
  `pt`.`Nivel` AS `Nivel`,
  `pt`.`Prioridad` AS `Prioridad`,
  `p`.`PuestoID` AS `PuestoIDPrioridad`,
  `adm`.`BotonTurnoID` AS `BotonTurnoID`,
  `adm`.`BotonTurno` AS `BotonTurno`,
  `adm`.`BotonTurnoValor` AS `BotonTurnoValor`,
  `adm`.`Turno` AS `Turno`,
  `adm`.`TurnoConcatenado` AS `TurnoConcatenado`,
  `adm`.`EstadoTurnoID` AS `EstadoTurnoID`,
  `adm`.`Estado` AS `Estado`,
  `adm`.`EstatusTurnoID` AS `EstatusTurnoID`,
  `adm`.`Estatus` AS `Estatus`,
  `adm`.`FechaHoraSeleccion` AS `FechaHoraSeleccion`,
  `adm`.`FechaHoraLlamada` AS `FechaHoraLlamada`,
  `adm`.`FechaHoraEnPuesto` AS `FechaHoraEnPuesto`,
  `adm`.`FechaHoraFinalizar` AS `FechaHoraFinalizar`,
  `adm`.`FechaHoraAnulacion` AS `FechaHoraAnulacion`,
  `adm`.`FechaHoraTransferido` AS `FechaHoraTransferido`,
  `adm`.`TransferidoAPuestoID` AS `TransferidoAPuestoID`,
  `adm`.`FechaHoraRellamada` AS `FechaHoraRellamada`,
  `adm`.`CantReLlamadas` AS `CantReLlamadas`,
  `adm`.`Comentario` AS `Comentario`,
  `adm`.`PuestoID` AS `PuestoID`,
  `adm`.`Puesto` AS `Puesto`,
  `adm`.`DepartamentoID` AS `DepartamentoID`,
  `adm`.`Departamento` AS `Departamento`,
  `adm`.`SucursalID` AS `SucursalID`,
  `adm`.`Sucursal` AS `Sucursal`,
  `adm`.`Empresa` AS `Empresa`,
  `adm`.`CreadoPorUsuarioID` AS `CreadoPorUsuarioID`,
  `adm`.`FechaCreacion` AS `FechaCreacion`,
  `adm`.`ModificadoPorUsuarioID` AS `ModificadoPorUsuarioID`,
  `adm`.`FechaModificacion` AS `FechaModificacion`,
  `adm`.`Activo` AS `Activo`,
  `adm`.`IDExterno` AS `IDExterno`,
  `adm`.`CampoExterno` AS `CampoExterno`,
  DAYOFMONTH(`adm`.`FechaCreacion`) AS `Dia`,
  MONTH(`adm`.`FechaCreacion`) AS `Mes`,
  YEAR(`adm`.`FechaCreacion`) AS `Ano`
FROM ((`vw_administracion_turnos` `adm`
  LEFT JOIN `tbl_prioridad_turnos_puestos` `p`
    ON ((`adm`.`BotonTurnoID` = `p`.`BotonTurnoID`)))
  LEFT JOIN `tbl_prioridades_turnos` `pt`
    ON ((`p`.`PrioridadID` = `pt`.`Id`)))
ORDER BY `pt`.`Nivel`, `adm`.`Turno`;

--
-- Create view "vw_botones_departamentos"
--
CREATE OR REPLACE
VIEW vw_botones_departamentos
AS
SELECT
  `a`.`Id` AS `Id`,
  `a`.`BotonTurnoID` AS `BotonTurnoID`,
  CONCAT(`c`.`Nombre`, ' - ', `c`.`TipoBoton`) AS `Boton`,
  `a`.`DepartamentoID` AS `DepartamentoID`,
  `c`.`Icono` AS `Icono`,
  `c`.`Color` AS `Color`,
  `c`.`TextoGraMostrar` AS `TextoGraMostrar`,
  `c`.`TextoPeqMostrar` AS `TextoPeqMostrar`,
  `c`.`ValorBoton` AS `ValorBoton`,
  `c`.`TipoBoton` AS `TipoBoton`,
  `c`.`Logo` AS `Logo`,
  CONCAT(`b`.`Departamento`, ' - ', CONVERT(`b`.`Sucursal` USING utf8mb4), ' - ', CONVERT(`b`.`Empresa` USING utf8mb4)) AS `Departamento`,
  `a`.`Activo` AS `Activo`
FROM ((`pv_botones_turnos_departamentos` `a`
  JOIN `tbl_botones_turnos` `c`
    ON ((`a`.`BotonTurnoID` = `c`.`Id`)))
  LEFT JOIN `vw_departamentos_sucursales` `b`
    ON ((`a`.`DepartamentoID` = `b`.`Id`)));

--
-- Create view "vw_departamentos_sucursales"
--
CREATE OR REPLACE
VIEW vw_departamentos_sucursales
AS
SELECT
  `a`.`Id` AS `Id`,
  `a`.`Codigo` AS `Codigo`,
  `a`.`Nombre` AS `Departamento`,
  `a`.`Descripcion` AS `Descripcion`,
  `a`.`SucursalID` AS `SucursalID`,
  `b`.`Nombre` AS `Sucursal`,
  `d`.`Id` AS `EmpresaID`,
  `d`.`Nombre` AS `Empresa`,
  `a`.`FechaCreacion` AS `FechaCreacion`,
  `a`.`Activo` AS `Activo`
FROM ((`tbl_departamentos` `a`
  LEFT JOIN `tbl_sucursales` `b`
    ON ((`a`.`SucursalID` = `b`.`Id`)))
  JOIN `tbl_empresa` `d`
    ON ((`b`.`EmpresaID` = `d`.`Id`)));

--
-- Create view "vw_permisos_modulos_usuarios"
--
CREATE OR REPLACE
VIEW vw_permisos_modulos_usuarios
AS
SELECT
  `p`.`Id` AS `PerfilID`,
  `p`.`Perfil` AS `Perfil`,
  `m`.`Id` AS `ModuloID`,
  `m`.`Codigo` AS `Codigo`,
  `m`.`Nombre` AS `Modulo`,
  `m`.`Descripcion` AS `DescripcionModulo`
FROM ((`tbl_perfiles_usuarios_permisos_modulos` `pm`
  LEFT JOIN `tbl_perfiles_usuarios` `p`
    ON ((`pm`.`PerfilUsuarioID` = `p`.`Id`)))
  LEFT JOIN `tbl_modulos_aplicacion` `m`
    ON ((`pm`.`ModuloID` = `m`.`Id`)))
WHERE (`pm`.`Activo` = 1);

--
-- Create view "vw_prioridades_turnos_puesto"
--
CREATE OR REPLACE
VIEW vw_prioridades_turnos_puesto
AS
SELECT
  `p`.`Id` AS `Id`,
  `p`.`PrioridadID` AS `PrioridadID`,
  `pt`.`Nivel` AS `Nivel`,
  `pt`.`Prioridad` AS `Prioridad`,
  `p`.`BotonTurnoID` AS `BotonTurnoID`,
  `b`.`Nombre` AS `BotonTurno`,
  `p`.`PuestoID` AS `PuestoID`,
  `pu`.`Nombre` AS `Puesto`,
  CONCAT(CONVERT(`pu`.`Nombre` USING utf8mb4), ' - ', `vw_puestos`.`Departamento`, ' - ', CONVERT(`vw_puestos`.`Sucursal` USING utf8mb4)) AS `PuestoCon`,
  `vw_puestos`.`Departamento` AS `Departamento`,
  `vw_puestos`.`Sucursal` AS `Sucursal`,
  `p`.`Activo` AS `Activo`
FROM ((((`tbl_prioridad_turnos_puestos` `p`
  LEFT JOIN `tbl_botones_turnos` `b`
    ON ((`p`.`BotonTurnoID` = `b`.`Id`)))
  LEFT JOIN `tbl_puestos` `pu`
    ON ((`p`.`PuestoID` = `pu`.`Id`)))
  LEFT JOIN `tbl_prioridades_turnos` `pt`
    ON ((`p`.`PrioridadID` = `pt`.`Id`)))
  LEFT JOIN `vw_puestos_sucursales` `vw_puestos`
    ON ((`p`.`PuestoID` = `vw_puestos`.`PuestoID`)));

--
-- Create view "vw_puestos_prioridades"
--
CREATE OR REPLACE
VIEW vw_puestos_prioridades
AS
SELECT
  `ptp`.`Id` AS `Id`,
  `ptp`.`PrioridadID` AS `PrioridadID`,
  `pt`.`Nivel` AS `Nivel`,
  `pt`.`Prioridad` AS `Prioridad`,
  `ptp`.`BotonTurnoID` AS `BotonTurnoID`,
  `b`.`Nombre` AS `Nombre`,
  `b`.`ValorBoton` AS `ValorBoton`,
  `ptp`.`PuestoID` AS `PuestoID`,
  `p`.`Nombre` AS `Puesto`
FROM (((`tbl_prioridad_turnos_puestos` `ptp`
  LEFT JOIN `tbl_prioridades_turnos` `pt`
    ON ((`ptp`.`PrioridadID` = `pt`.`Id`)))
  LEFT JOIN `tbl_puestos` `p`
    ON ((`ptp`.`PuestoID` = `p`.`Id`)))
  LEFT JOIN `tbl_botones_turnos` `b`
    ON ((`ptp`.`BotonTurnoID` = `b`.`Id`)));

--
-- Create view "vw_puestos_sucursales"
--
CREATE OR REPLACE
VIEW vw_puestos_sucursales
AS
SELECT
  `puestos`.`Id` AS `PuestoID`,
  `puestos`.`Codigo` AS `PuestoCodigo`,
  `puestos`.`Nombre` AS `Puesto`,
  `puestos`.`Descripcion` AS `PuestoDescripcion`,
  `puestos`.`DepartamentoID` AS `DepartamentoID`,
  `dpt`.`Codigo` AS `DepartamentoCodigo`,
  `dpt`.`Nombre` AS `Departamento`,
  `dpt`.`Descripcion` AS `DepartamentoDescripcion`,
  `suc`.`Id` AS `SucursalID`,
  `suc`.`Nombre` AS `Sucursal`,
  `suc`.`Descripcion` AS `SucursalDescripcion`,
  `empresa`.`Id` AS `EmpresaID`,
  `empresa`.`Codigo` AS `EmpresaCodigo`,
  `empresa`.`Nombre` AS `Empresa`,
  `empresa`.`Descripcion` AS `EmpresaDescripcion`,
  `empresa`.`LogoPeq` AS `EmpresaLogoPeq`,
  `empresa`.`LogoGrande` AS `EmpresaLogoGrande`,
  `puestos`.`CreadoPorUsuarioID` AS `CreadoPorUsuarioID`,
  `puestos`.`FechaCreacion` AS `FechaCreacion`,
  `puestos`.`ModificadoPorUsuarioID` AS `ModificadoPorUsuarioID`,
  `puestos`.`FechaModificacion` AS `FechaModificacion`,
  `puestos`.`Activo` AS `Activo`
FROM (((`tbl_puestos` `puestos`
  LEFT JOIN `tbl_departamentos` `dpt`
    ON ((`puestos`.`DepartamentoID` = `dpt`.`Id`)))
  LEFT JOIN `tbl_sucursales` `suc`
    ON ((`dpt`.`SucursalID` = `suc`.`Id`)))
  LEFT JOIN `tbl_empresa` `empresa`
    ON ((`suc`.`EmpresaID` = `empresa`.`Id`)))
WHERE ((`puestos`.`Activo` = 1)
AND (`dpt`.`Activo` = 1)
AND (`suc`.`Activo` = 1)
AND (`empresa`.`Activo` = 1));

--
-- Create view "vw_pvt_puestos_usuarios"
--
CREATE OR REPLACE
VIEW vw_pvt_puestos_usuarios
AS
SELECT
  `a`.`Id` AS `UsuarioID`,
  `b`.`PuestoID` AS `PuestoID`,
  `c`.`Puesto` AS `Puesto`,
  CONCAT(CONVERT(`c`.`Puesto` USING utf8mb4), ' - ', `c`.`Departamento`, ' - ', CONVERT(`c`.`Sucursal` USING utf8mb4)) AS `PuestoConcatenado`
FROM ((`tbl_usuarios` `a`
  JOIN `pv_usuarios_puestos` `b`
    ON ((`a`.`Id` = `b`.`UsuarioID`)))
  JOIN `vw_puestos_sucursales` `c`
    ON ((`b`.`PuestoID` = `c`.`PuestoID`)));

--
-- Create view "vw_sucursales_empresa"
--
CREATE OR REPLACE
VIEW vw_sucursales_empresa
AS
SELECT
  `a`.`Id` AS `Id`,
  `a`.`Codigo` AS `Codigo`,
  `a`.`Nombre` AS `Nombre`,
  `a`.`Descripcion` AS `Descripcion`,
  `a`.`Direccion` AS `Direccion`,
  `a`.`Telefono` AS `Telefono`,
  `a`.`FechaCreacion` AS `FechaCreacion`,
  `b`.`Id` AS `EmpresaID`,
  `b`.`Nombre` AS `Empresa`,
  `a`.`Activo` AS `Activo`
FROM (`tbl_sucursales` `a`
  JOIN `tbl_empresa` `b`
    ON ((`a`.`EmpresaID` = `b`.`Id`)));

--
-- Create view "vw_usuarios"
--
CREATE OR REPLACE
VIEW vw_usuarios
AS
SELECT
  `usuarios`.`Id` AS `Id`,
  `usuarios`.`Nombre` AS `Nombre`,
  `usuarios`.`Apellido` AS `Apellido`,
  `usuarios`.`Usuario` AS `Usuario`,
  `usuarios`.`Password` AS `Password`,
  `usuarios`.`Email` AS `Email`,
  `usuarios`.`PerfilUsuarioID` AS `PerfilUsuarioID`,
  `perfiles`.`Perfil` AS `Perfil`,
  `puestos`.`Id` AS `PuestoId`,
  `puestos`.`Codigo` AS `PuestoCodigo`,
  `puestos`.`Nombre` AS `Puesto`,
  `dept`.`Id` AS `DepartamentoID`,
  `dept`.`Codigo` AS `DepartamentoCodigo`,
  `dept`.`Nombre` AS `Departamento`,
  `suc`.`Id` AS `SucursalID`,
  `suc`.`Codigo` AS `SucursalCodigo`,
  `suc`.`Nombre` AS `Sucursal`,
  `empresa`.`Codigo` AS `EmpresaCodigo`,
  `empresa`.`Nombre` AS `Empresa`,
  `empresa`.`Descripcion` AS `EmpresaDescripcion`,
  `empresa`.`LogoPeq` AS `EmpresaLogo`,
  `usuarios`.`Imagen` AS `Imagen`,
  `usuarios`.`CreadoPorUsuarioID` AS `CreadoPorUsuarioID`,
  `usuarios`.`FechaCreacion` AS `FechaCreacion`,
  `usuarios`.`Activo` AS `Activo`
FROM ((((((`tbl_usuarios` `usuarios`
  LEFT JOIN `tbl_perfiles_usuarios` `perfiles`
    ON ((`usuarios`.`PerfilUsuarioID` = `perfiles`.`Id`)))
  LEFT JOIN `pv_usuarios_puestos` `pv_usp`
    ON ((`pv_usp`.`UsuarioID` = `usuarios`.`Id`)))
  LEFT JOIN `tbl_puestos` `puestos`
    ON ((`pv_usp`.`PuestoID` = `puestos`.`Id`)))
  LEFT JOIN `tbl_departamentos` `dept`
    ON ((`puestos`.`DepartamentoID` = `dept`.`Id`)))
  LEFT JOIN `tbl_sucursales` `suc`
    ON ((`dept`.`SucursalID` = `suc`.`Id`)))
  LEFT JOIN `tbl_empresa` `empresa`
    ON ((`suc`.`EmpresaID` = `empresa`.`Id`)));

-- 
-- Dumping data for table pv_botones_turnos_departamentos
--
INSERT INTO pv_botones_turnos_departamentos VALUES
(4, 1, 1, 1, '2017-09-02 00:00:00', NULL, NULL, 1),
(6, 3, 1, 1, '2017-09-02 00:00:00', NULL, NULL, 1),
(7, 2, 1, 1, '2017-09-04 00:00:00', NULL, NULL, 1),
(8, 1, 3, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(9, 6, 1, 1, '2017-11-19 00:00:00', NULL, NULL, 1),
(10, 5, 1, 1, '2017-11-19 00:00:00', NULL, NULL, 1);

-- 
-- Dumping data for table pv_usuarios_puestos
--
INSERT INTO pv_usuarios_puestos VALUES
(13, 1, 1, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(14, 1, 2, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(18, 6, 6, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(19, 2, 4, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(20, 5, 5, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(21, 8, 7, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(27, 9, 9, 1, '2017-11-19 00:00:00', NULL, NULL, 1),
(28, 3, 1, 1, '2017-11-25 00:00:00', NULL, NULL, 1),
(29, 3, 2, 1, '2017-11-25 00:00:00', NULL, NULL, 1),
(30, 3, 10, 1, '2017-11-25 00:00:00', NULL, NULL, 1);

-- 
-- Dumping data for table tbl_administracion_turnos
--
INSERT INTO tbl_administracion_turnos VALUES
(1, 1, '1', 4, 1, '2018-02-03 00:03:18', 1, NULL, NULL, '2018-02-03 00:01:47', '2018-02-03 00:03:28', NULL, NULL, '2018-02-03 00:03:32', 9, 1, 1, NULL, NULL, NULL, '2018-02-03 00:01:47', 9, NULL, 9, 1),
(2, 6, '1', 3, 1, '2018-02-03 00:03:43', 1, NULL, '2018-02-03 00:03:55', '2018-02-03 00:01:49', NULL, NULL, NULL, NULL, 9, 1, 1, '8787', NULL, NULL, '2018-02-03 00:01:49', 9, NULL, NULL, 1),
(3, 1, '2', 1, 1, '2018-02-03 00:12:01', 1, NULL, NULL, '2018-02-03 00:11:56', '2018-02-03 00:12:04', NULL, NULL, '2018-02-03 00:12:06', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:11:56', 3, NULL, 3, 1),
(4, 3, '1', 1, 1, '2018-02-03 00:12:20', 1, NULL, NULL, '2018-02-03 00:12:17', '2018-02-03 00:12:22', NULL, NULL, '2018-02-03 00:12:25', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:12:17', 3, NULL, 3, 1),
(5, 3, '2', 1, 1, '2018-02-03 00:14:38', 1, NULL, NULL, '2018-02-03 00:14:34', '2018-02-03 00:14:46', NULL, NULL, '2018-02-03 00:14:50', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:14:34', 3, NULL, 3, 1),
(6, 1, '3', 1, 1, '2018-02-03 00:18:53', 1, NULL, NULL, '2018-02-03 00:18:50', '2018-02-03 00:18:55', NULL, NULL, '2018-02-03 00:18:58', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:18:50', 3, NULL, 3, 1),
(7, 6, '2', 1, NULL, NULL, NULL, NULL, NULL, '2018-02-03 00:19:53', NULL, NULL, NULL, NULL, NULL, 1, 1, NULL, NULL, NULL, '2018-02-03 00:19:53', 3, NULL, NULL, 1),
(8, 1, '4', 1, 1, '2018-02-03 00:19:59', 1, NULL, NULL, '2018-02-03 00:19:55', '2018-02-03 00:20:01', NULL, NULL, '2018-02-03 00:20:02', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:19:55', 3, NULL, 3, 1),
(9, 6, '3', 1, NULL, NULL, NULL, NULL, NULL, '2018-02-03 00:20:41', NULL, NULL, NULL, NULL, NULL, 1, 1, NULL, NULL, NULL, '2018-02-03 00:20:41', 3, NULL, NULL, 1),
(10, 1, '5', 1, 1, '2018-02-03 00:20:55', 1, NULL, NULL, '2018-02-03 00:20:52', '2018-02-03 00:20:58', NULL, NULL, '2018-02-03 00:20:59', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:20:52', 3, NULL, 3, 1),
(11, 1, '6', 1, 1, '2018-02-03 00:25:35', 1, NULL, NULL, '2018-02-03 00:25:32', '2018-02-03 00:25:37', NULL, NULL, '2018-02-03 00:25:38', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:25:32', 3, NULL, 3, 1),
(12, 3, '3', 1, 1, '2018-02-03 00:30:10', 1, NULL, NULL, '2018-02-03 00:27:25', '2018-02-03 00:30:12', NULL, NULL, '2018-02-03 00:30:13', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:27:25', 3, NULL, 3, 1),
(13, 1, '7', 1, 1, '2018-02-03 00:27:56', 1, NULL, NULL, '2018-02-03 00:27:53', '2018-02-03 00:28:00', NULL, NULL, '2018-02-03 00:28:01', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:27:53', 3, NULL, 3, 1),
(14, 1, '8', 1, 1, '2018-02-03 00:32:10', 1, NULL, NULL, '2018-02-03 00:32:06', '2018-02-03 00:32:12', NULL, NULL, '2018-02-03 00:32:14', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:32:06', 3, NULL, 3, 1),
(15, 1, '9', 1, 1, '2018-02-03 00:35:25', 1, NULL, NULL, '2018-02-03 00:35:22', '2018-02-03 00:35:27', NULL, NULL, '2018-02-03 00:35:29', 1, 1, 1, NULL, NULL, NULL, '2018-02-03 00:35:22', 3, NULL, 3, 1);

-- 
-- Dumping data for table tbl_botones_turnos
--
INSERT INTO tbl_botones_turnos VALUES
(1, 'ARS SEMMA', 'ti-arrow-circle-left', 'primary', 'ARS SEMMA', '', 'S', 'BloqueA', '170729091128-arssemma.png', 3, '2017-07-27 00:00:00', 5, '2017-08-19 00:00:00', 1),
(2, 'ARS', 'ti-arrow-circle-left', 'danger', 'ARS', '', 'A', 'BloqueA', '170729091153-arssemma.png', 3, '2017-07-27 00:00:00', 5, '2017-08-19 00:00:00', 1),
(3, 'PRIVADO', 'ti-arrow-circle-left', 'success', 'PRIVADO', '', 'P', 'BloqueA', '170729091207-arssemma.png', 3, '2017-07-27 00:00:00', 3, '2017-09-04 00:00:00', 1),
(4, 'ESPECIAL', ' ti-arrow-circle-left', 'danger', 'ESPECIAL', '', 'E', 'BloqueA', '170729091220-arssemma.png', 3, '2017-07-28 00:00:00', 5, '2017-08-19 00:00:00', 1),
(5, 'ENTREGA DE RESULTADOS', '', 'warning', 'ENTREGA RESULTADOS', '', 'R', 'BloqueA', '171119011431-header.png', 5, '2017-08-19 00:00:00', 1, '2017-11-19 00:00:00', 1),
(6, 'TOMA DE MUESTRA', '', 'info', 'TOMA DE MUESTRA', '', 'T', 'BloqueA', '171119011026-muestrsa.png', 5, '2017-08-19 00:00:00', 1, '2017-11-19 00:00:00', 1);

-- 
-- Dumping data for table tbl_departamentos
--
INSERT INTO tbl_departamentos VALUES
(1, 1, 'DEPT-SERVICIO CLIENTE', 'SERVICIOS AL CLIENTE', '', 3, '2017-07-28 00:00:00', 1, '2017-09-04 00:00:00', 1),
(3, 1, 'DEPT-UROLOGIA', 'UROLOGIA', '', 3, '2017-09-04 00:00:00', NULL, NULL, 1);

-- 
-- Dumping data for table tbl_empresa
--
INSERT INTO tbl_empresa VALUES
(1, 'LPR', 'LABORATORIO CLINICO PATRIA RIVAS', 'BIENVENIDO A LOS LABORATORIOS PATRIA RIVAS', '170725045706-logo.jpg', '170728041220-unnamed.png', '(000) 000-0000', 'JOAQUIN PEREZ, GAZCUE', '0-0000-00', 5, '2017-07-23 00:00:00', 1, '2017-09-04 00:00:00', 1);

-- 
-- Dumping data for table tbl_estados_turnos
--
INSERT INTO tbl_estados_turnos VALUES
(1, 'E', 'EN ESPERA', 5, '2017-07-23 00:00:00', 5, '2017-07-23 00:00:00', 1),
(2, 'P', 'EN PUESTO', 5, '2017-07-23 00:00:00', 1, '2017-09-04 00:00:00', 1),
(3, 'A', 'ANULADO', 5, '2017-07-23 00:00:00', 1, '2017-09-04 00:00:00', 1),
(4, 'F', 'FINALIZADO', 5, '2017-07-23 00:00:00', NULL, NULL, 1),
(5, 'T', 'TRANSFERIDO', 5, '2017-07-23 00:00:00', NULL, NULL, 1),
(6, 'L', 'EN LLAMADA', 5, '2017-07-23 00:00:00', NULL, NULL, 1);

-- 
-- Dumping data for table tbl_estatus_turnos
--
INSERT INTO tbl_estatus_turnos VALUES
(1, 'F', 'Finalizado', 1, NULL, 1, '2017-09-04 00:00:00', 1);

-- 
-- Dumping data for table tbl_log_administracion_turnos
--
-- Table onetime.tbl_log_administracion_turnos does not contain any data (it is empty)

-- 
-- Dumping data for table tbl_log_usuarios
--
-- Table onetime.tbl_log_usuarios does not contain any data (it is empty)

-- 
-- Dumping data for table tbl_marquesina_pantalla
--
INSERT INTO tbl_marquesina_pantalla VALUES
(1, 1, 'NO ESTAREMOS LABORANDO DEBIDO AL HURACAN HASTA EL LUNES', '02:15:00', '2017-11-11', '02:30:00', '2017-11-11', 3, '2017-09-08 00:00:00', 1, '2017-11-11 00:00:00', 1),
(2, 1, 'PRUEBA DE LA MARQUESINA', '10:10:00', '2017-09-08', '09:20:00', '2017-09-07', 3, '2017-09-09 00:00:00', 3, '2017-09-09 00:00:00', 1),
(3, 1, 'BLACK FRIDAY', '00:00:00', '2017-11-24', '00:11:00', '2017-11-25', 3, '2017-09-09 00:00:00', 1, '2017-11-25 00:00:00', 1);

-- 
-- Dumping data for table tbl_modulos_aplicacion
--
INSERT INTO tbl_modulos_aplicacion VALUES
(1, 'M-DASH', 'DASHBOARD', 'Pantalla Principal', NULL, NULL, 1, '2017-09-04 00:00:00', 1),
(2, 'M-PONC', 'PONCHE', 'Pantalla de Ponche', NULL, NULL, NULL, NULL, 1);

-- 
-- Dumping data for table tbl_perfiles_usuarios
--
INSERT INTO tbl_perfiles_usuarios VALUES
(1, 'Oficial', '', 1, NULL, 1, '2017-09-04 00:00:00', 1),
(2, 'Sistema', NULL, NULL, NULL, NULL, NULL, 1),
(3, 'Analista', NULL, NULL, NULL, NULL, NULL, 1),
(4, 'Administrador', 'Administrador de Sistemas', 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(5, 'Ponche', 'Perfil para el usuario de Ponche', 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(6, 'Pantalla', 'Perfil para el usuario de Pantalla', 3, '2017-09-04 00:00:00', NULL, NULL, 1);

-- 
-- Dumping data for table tbl_perfiles_usuarios_permisos_modulos
--
INSERT INTO tbl_perfiles_usuarios_permisos_modulos VALUES
(1, 1, 1, NULL, NULL, NULL, NULL, 1),
(2, 1, 2, NULL, NULL, NULL, NULL, 1);

-- 
-- Dumping data for table tbl_prioridad_turnos_puestos
--
INSERT INTO tbl_prioridad_turnos_puestos VALUES
(1, 5, 0, 10, 3, '2017-08-16 00:00:00', 1, '2017-11-25 00:00:00', 1),
(2, 1, 1, 1, 6, '2017-08-16 00:00:00', 1, '2017-09-04 00:00:00', 1),
(3, 2, 2, 1, 6, '2017-08-16 00:00:00', NULL, NULL, 1),
(4, 3, 3, 1, 6, '2017-08-16 00:00:00', NULL, NULL, 1),
(5, 4, 4, 1, 6, '2017-08-16 00:00:00', NULL, NULL, 1),
(6, 1, 6, 9, 6, '2017-08-19 00:00:00', 1, '2017-11-25 00:00:00', 1),
(7, 1, 1, 2, 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(8, 2, 2, 2, 1, '2017-09-10 00:00:00', NULL, NULL, 1),
(9, 1, 5, 1, 1, '2017-12-02 00:00:00', NULL, NULL, 1);

-- 
-- Dumping data for table tbl_prioridades_turnos
--
INSERT INTO tbl_prioridades_turnos VALUES
(1, 2, 'ALTO', NULL, NULL, 3, '2017-07-28 00:00:00', 1),
(2, 3, 'NORMAL', NULL, NULL, 3, '2017-07-28 00:00:00', 1),
(3, 4, 'BAJO', NULL, NULL, 1, '2017-09-04 00:00:00', 1),
(4, 1, 'ESPECIAL', 3, '2017-07-28 00:00:00', 3, '2017-07-28 00:00:00', 1),
(5, 0, 'TODOS', 5, '2017-08-02 00:00:00', 5, '2017-08-02 00:00:00', 1);

-- 
-- Dumping data for table tbl_puestos
--
INSERT INTO tbl_puestos VALUES
(1, 1, 'PT-1', 'PUESTO 1', 'FACTURACION', 3, '2017-07-28 00:00:00', 1, '2017-09-04 00:00:00', 1),
(2, 1, 'PT-2', 'PUESTO 2', 'VALIDACION DE SEGUROS', 3, '2017-07-28 00:00:00', 1, '2017-09-10 00:00:00', 1),
(4, 1, 'P-PONCHE', 'PONCHE', '', 5, '2017-07-28 00:00:00', NULL, NULL, 1),
(5, 1, 'P-PANTALLA', 'PANTALLA - DEPT. SERVICIO AL CLIENTE', 'PANTALLA SERVICIO AL CLIENTE', 1, '2017-09-03 00:00:00', 1, '2017-09-03 00:00:00', 1),
(6, 3, 'P-PONCHE 2', 'PONCHE 2', '', 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(7, 3, 'P-PANTALLA2', 'PANTALLA - DEPT.  UROLOGIA', '', 3, '2017-09-04 00:00:00', NULL, NULL, 1),
(9, 1, 'PT-TM-1', 'TOMA DE MUESTRA', 'TOMA DE MUESTRA - SERVICIO AL CLIENTE - OP', 1, '2017-11-19 00:00:00', NULL, NULL, 1),
(10, 1, 'PT-TODOS', 'TODOS', 'ADMITE TODOS LOS TURNOS', 1, '2017-11-25 00:00:00', NULL, NULL, 1);

-- 
-- Dumping data for table tbl_sucursales
--
INSERT INTO tbl_sucursales VALUES
(1, 1, 'SUC-OP', 'OFICINA PRINCIPAL', '', '', '(626) 262-6262', 5, '2017-07-23 00:00:00', 1, '2017-09-04 00:00:00', 1);

-- 
-- Dumping data for table tbl_system_app
--
-- Table onetime.tbl_system_app does not contain any data (it is empty)

-- 
-- Dumping data for table tbl_tiempo_atencion_turnos
--
-- Table onetime.tbl_tiempo_atencion_turnos does not contain any data (it is empty)

-- 
-- Dumping data for table tbl_usuarios
--
INSERT INTO tbl_usuarios VALUES
(1, 4, 4, 'Admin', 'System', 'admin', '12345', 'admin@gmail.com', '170902081044-foto1.jpg', '1', '2017-05-20 00:00:00', 3, '2017-09-04 00:00:00', 1),
(2, 5, 0, 'PONCHE', 'OFICINA PRINCIPAL', 'poncheop', '12345', '', '170903072001-ecran-noir.jpg', '1', '2017-09-02 00:00:00', 3, '2017-09-04 00:00:00', 1),
(3, 1, 0, 'Oficial1', 'Servicio al Cliente - OP', 'oficial1', '12345', 'oficial1@gmail.com', '170904071426-13882248_1199874236742453_5684957520373750913_n.jpg', '1', '2017-09-04 00:00:00', 1, '2017-11-25 00:00:00', 1),
(5, 6, 0, 'PANTALLA - DEPT. SERVICIO AL CLIENTE', 'OFICINA PRINCIPAL', 'pantallaop', '12345', 'Pantalla@gmail.com', '170904072037-ecran-noir.jpg', '3', '2017-09-04 00:00:00', 3, '2017-09-04 00:00:00', 1),
(6, 5, 0, 'PONCHE 2', 'OFICINA PRINCIPAL', 'poncheop2', '12345', 'ponche2@gmail.com', '170904082856-ecran-noir.jpg', '3', '2017-09-04 00:00:00', 3, '2017-09-04 00:00:00', 1),
(8, 6, 0, 'PANTALLA - DEPT.  UROLOGIA', 'OFICINA PRINCIPAL', 'pantallaop2', '12345', 'pantalla2@gmail.com', '170904083202-ecran-noir.jpg', '3', '2017-09-04 00:00:00', 3, '2017-09-04 00:00:00', 1),
(9, 3, 0, 'Analista', 'OFICINA PRINCIPAL', 'analistaop', '12345', 'analista@gmail.com', '171118114441-whatsapp image 2017-01-07 at 10.37.14 am.jpeg', '1', '2017-11-18 00:00:00', 1, '2017-11-19 00:00:00', 1);

-- 
-- Dumping data for table tbl_videos
--
-- Table onetime.tbl_videos does not contain any data (it is empty)

-- 
-- Dumping data for table tmp_turnos_ordenados
--
-- Table onetime.tmp_turnos_ordenados does not contain any data (it is empty)
-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;
